<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="webkit" name="renderer">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>查看图片</title>
    <link href="../../static/layui/css/layui.css" rel="stylesheet">
</head>
<body>
<!--从?后面取得url参数加载图片-->

<div style=" margin: 25px ;">
    <h2 style="text-align: center">查看图片</h2>
    <br>
    <div style="text-align: center">
        <img alt="图片加载失败" style="max-width: 100%; max-height: 100%">
    </div>
</div>


<script src="../../static/layui/layui.js"></script>
<script>
    layui.use(['layer'], function () {
        var $ = layui.$;
        var search = window.location.search;
        var img =''
        var n=0;
        if (search !== '') {
            var query = decodeURI(search);
            var currentId = query.substring(query.indexOf('=') + 1);
            params = JSON.parse(currentId);
            //如果有,号,说明是多张图片
            if (params.img === null) {
                layer.msg('图片不存在', {icon: 5});
            }
            if (params.img.indexOf(',') !== -1) {
                //如果有多张图片

                //将,号分割的图片地址放到数组中
                var imgs = params.img.split(',');
                //将第一张图片地址放到img中
                img = "../../storage/"+imgs[0];



                $('img').attr('src',img);
                //点击图片切换
                $('img').click(function () {
                    n++;
                    if (n>=params.img.split(',').length){
                        n=0;
                    }
                    img = "../../storage/"+params.img.split(',')[n];
                    $('img').attr('src', img);
                });
            }else{
                img = "../../storage/"+params.img;
                if (img === null) {
                    layer.msg('图片加载失败', {icon: 5});
                }
                $('img').attr('src', img);
            }
        }
    });
</script>
</body>
</html>